"use strict";function getJSON(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(a,b),e.responseType="json",e.onload=function(){200==e.status?c(e.response):d(Error(e.statusText))},e.onerror=function(){d(Error("Network Error"))},e.send()})}function checkKey(a){"37"==a.keyCode?newHTML(previous()):"39"==a.keyCode&&newHTML(next())}var url="https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=e45668aaa6d50226c2df38b2f2d75c86&user_id=84003820@N05&format=json&nojsoncallback=1",albumArr=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].farm,e=a[c].server,f=a[c].id,g=a[c].secret,h=a[c].title,i="https://farm"+d+".staticflickr.com/"+e+"/"+f+"_"+g+".jpg",j={};j.id=c,j.imageUrl=i,j.photoTitle=h,b.push(j)}localStorage.setItem("images",JSON.stringify(b))},getFromLocalStorage=function(){var a=localStorage.getItem("images"),b=JSON.parse(a);return b},buildHTML=function(a,b){var c=document.getElementById("album"),d=document.createElement("div");d.classList.add("photo_container"),d.innerHTML="<div id= 'row'><div id= 'previous'><i id = 'left' class='fa fa-chevron-left'></i></div><img id= 'photo' src="+b+"><div id= 'next'><i id = 'right' class='fa fa-chevron-right'></i></div></div><p id= 'photo_title'>"+a+"</p>",d.id="lightbox",c.appendChild(d),addEvents()},initialHTML=function(a){var b=(a[0].id,a[0].photoTitle),c=a[0].imageUrl;buildHTML(b,c),localStorage.setItem("count",0)},newHTML=function(a){var b=getFromLocalStorage()[a],c=b.photoTitle,d=b.imageUrl;document.getElementById("photo").src=d,document.getElementById("photo_title").innerText=c},previous=function(){var a=parseInt(localStorage.getItem("count"));return a>0&&(a-=1,localStorage.setItem("count",a)),a},next=function(){var a=parseInt(localStorage.getItem("count")),b=getFromLocalStorage().length;return b>a&&(a+=1,localStorage.setItem("count",a)),a},addEvents=function(){var a=document.getElementById("next"),b=document.getElementById("previous");a.addEventListener("click",function(){newHTML(next())},!1),b.addEventListener("click",function(){newHTML(previous())},!1)};document.addEventListener("keydown",checkKey,!1),getJSON("GET",url).then(function(a){return a.photos.photo},function(a){console.error("Something went wrong!",a)}).then(albumArr).then(getFromLocalStorage).then(initialHTML);